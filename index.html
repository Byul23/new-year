<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>New Year Countdown üíõ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --accent: #ffd700;
  --bg: #0f0f0f;
  --card: #1a1a1a;
  --text: #ffffff;
}

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.container {
  width: 90%;
  max-width: 900px;
  background: var(--card);
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 0 35px rgba(255,215,0,0.3);
  text-align: center;
}

h1 {
  color: var(--accent);
}

#countdown {
  font-size: 1.6rem;
  margin: 20px 0;
}

.hidden {
  display: none;
}

button {
  background: var(--accent);
  border: none;
  padding: 10px 18px;
  border-radius: 10px;
  font-weight: bold;
  cursor: pointer;
  margin-top: 10px;
}

textarea, input {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: none;
  margin-top: 10px;
}

.media {
  margin-top: 20px;
  text-align: left;
}

.media img {
  max-width: 100%;
  border-radius: 10px;
  margin-top: 10px;
}

.media a {
  color: var(--accent);
  display: block;
  margin-top: 8px;
}
</style>
</head>

<body>

<div class="container">

  <!-- PUBLIC VIEW -->
  <div id="publicView">
    <h1 id="title">‚ú® Counting Down to 2026 ‚ú®</h1>
    <div id="countdown"></div>

    <div id="greeting" class="hidden">
      <h1 id="greetText">Happy New Year, my love üíõ</h1>
      <p id="messageText">
        This new year starts with you, and I‚Äôm grateful for every moment we share.
      </p>
    </div>

    <button onclick="openEditor()">Editor Login</button>
  </div>

  <!-- EDITOR LOGIN -->
  <div id="login" class="hidden">
    <h1>üîê Editor Access</h1>
    <input type="password" id="password" placeholder="Password">
    <button onclick="checkPassword()">Enter</button>
  </div>

  <!-- EDITOR PANEL -->
  <div id="editor" class="hidden">
    <h1>‚úçÔ∏è Edit Your New Year Message</h1>

    <textarea id="editGreeting" placeholder="Greeting title"></textarea>
    <textarea id="editMessage" placeholder="Message text"></textarea>

    <input type="file" id="fileUpload" accept="image/*,.pdf">
    <button onclick="addMedia()">Add Image / PDF</button>

    <div id="mediaList" class="media"></div>

    <button onclick="closeEditor()">Exit Editor</button>
  </div>

</div>

<script>
const TARGET_DATE = new Date("Jan 1, 2026 00:00:00").getTime();
const EDITOR_PASSWORD = "myLove2026";

/* Countdown */
function updateCountdown() {
  const now = new Date().getTime();
  const diff = TARGET_DATE - now;
  const el = document.getElementById("countdown");

  if (diff <= 0) {
    el.classList.add("hidden");
    document.getElementById("greeting").classList.remove("hidden");
    return;
  }

  const d = Math.floor(diff / (1000*60*60*24));
  const h = Math.floor((diff / (1000*60*60)) % 24);
  const m = Math.floor((diff / (1000*60)) % 60);
  const s = Math.floor((diff / 1000) % 60);

  el.innerText = `${d}d ${h}h ${m}m ${s}s`;
}

setInterval(updateCountdown, 1000);
updateCountdown();

/* Editor access */
function openEditor() {
  document.getElementById("publicView").classList.add("hidden");
  document.getElementById("login").classList.remove("hidden");
}

function checkPassword() {
  if (document.getElementById("password").value === EDITOR_PASSWORD) {
    document.getElementById("login").classList.add("hidden");
    document.getElementById("editor").classList.remove("hidden");
    loadEditorData();
  } else {
    alert("Wrong password");
  }
}

function closeEditor() {
  document.getElementById("editor").classList.add("hidden");
  document.getElementById("publicView").classList.remove("hidden");
}

/* Save & Load text */
function loadEditorData() {
  editGreeting.value = localStorage.getItem("greet") || greetText.innerText;
  editMessage.value = localStorage.getItem("msg") || messageText.innerText;
  loadMedia();
}

editGreeting.oninput = () => {
  localStorage.setItem("greet", editGreeting.value);
  greetText.innerText = editGreeting.value;
};

editMessage.oninput = () => {
  localStorage.setItem("msg", editMessage.value);
  messageText.innerText = editMessage.value;
};

/* Media upload */
function addMedia() {
  const file = fileUpload.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = () => {
    const items = JSON.parse(localStorage.getItem("media")) || [];
    items.push({ name: file.name, data: reader.result });
    localStorage.setItem("media", JSON.stringify(items));
    loadMedia();
  };
  reader.readAsDataURL(file);
}

function loadMedia() {
  const list = document.getElementById("mediaList");
  list.innerHTML = "";
  const items = JSON.parse(localStorage.getItem("media")) || [];

  items.forEach(item => {
    if (item.data.startsWith("data:image")) {
      const img = document.createElement("img");
      img.src = item.data;
      list.appendChild(img);
    } else {
      const link = document.createElement("a");
      link.href = item.data;
      link.textContent = item.name;
      link.target = "_blank";
      list.appendChild(link);
    }
  });
}

/* Load saved content on start */
window.onload = () => {
  greetText.innerText = localStorage.getItem("greet") || greetText.innerText;
  messageText.innerText = localStorage.getItem("msg") || messageText.innerText;
};
</script>

</body>
</html>
