<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>New Year üíõ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --bg: #fffdf5;
  --card: #fff7cc;
  --accent: #f6d365;
  --accent2: #fda085;
  --text: #3a2f1d;
}

body {
  margin: 0;
  font-family: "Poppins", Arial, sans-serif;
  background: linear-gradient(180deg, var(--bg), #fff3b0);
  color: var(--text);
  display: flex;
  justify-content: center;
  min-height: 100vh;
}

.container {
  width: 100%;
  max-width: 900px;
  padding: 20px;
}

.card {
  background: var(--card);
  border-radius: 24px;
  padding: 25px;
  box-shadow: 0 10px 40px rgba(246,211,101,0.35);
  animation: fadeUp 1s ease;
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

h1 {
  text-align: center;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  -webkit-background-clip: text;
  color: transparent;
}

#countdown {
  font-size: 1.6rem;
  text-align: center;
  margin: 20px 0;
}

.hidden { display: none; }

button {
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border: none;
  padding: 12px 18px;
  border-radius: 14px;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
}

input, textarea, select {
  width: 100%;
  padding: 10px;
  border-radius: 12px;
  border: none;
  margin-top: 8px;
}

.tabs {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.tab {
  flex: 1;
  text-align: center;
  padding: 10px;
  border-radius: 14px;
  background: #ffeaa7;
  cursor: pointer;
}

.tab.active {
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  color: white;
}

.editor-section {
  margin-top: 20px;
}

.preview-mobile {
  max-width: 375px;
  margin: auto;
  border: 3px dashed var(--accent);
  border-radius: 20px;
}

/* Spotify Wrapped style floating shapes */
.shape {
  position: fixed;
  width: 80px;
  height: 80px;
  background: radial-gradient(circle, var(--accent), transparent);
  animation: float 8s infinite alternate;
  opacity: 0.4;
}

@keyframes float {
  from { transform: translateY(0); }
  to { transform: translateY(-60px); }
}
</style>
</head>

<body>

<div class="shape" style="top:10%;left:10%"></div>
<div class="shape" style="top:70%;left:80%"></div>

<div class="container">

<!-- PUBLIC VIEW -->
<div id="public" class="card">
  <h1 id="title">Counting Down to 2026 üíõ</h1>
  <div id="countdown"></div>

  <div id="reveal" class="hidden">
    <h1 id="greeting">Happy New Year, my love üåº</h1>
    <p id="message">Every year is better with you.</p>
    <audio id="music" controls></audio>
  </div>

  <button onclick="openEditor()">Editor Login</button>
</div>

<!-- EDITOR -->
<div id="editor" class="card hidden">
  <h1>Editor Panel ‚ú®</h1>

  <div class="tabs">
    <div class="tab active" onclick="showTab('content')">‚úçÔ∏è Content</div>
    <div class="tab" onclick="showTab('theme')">üé® Theme</div>
    <div class="tab" onclick="showTab('music')">üé∂ Music</div>
    <div class="tab" onclick="showTab('preview')">üëÄ Preview</div>
  </div>

  <!-- CONTENT -->
  <div id="content" class="editor-section">
    <input id="editTitle" placeholder="Title">
    <textarea id="editGreeting" placeholder="Greeting"></textarea>
    <textarea id="editMessage" placeholder="Message"></textarea>
  </div>

  <!-- THEME -->
  <div id="theme" class="editor-section hidden">
    <label>Accent Color</label>
    <input type="color" id="accentPicker">
  </div>

  <!-- MUSIC -->
  <div id="musicTab" class="editor-section hidden">
    <label>Upload Song (mp3)</label>
    <input type="file" accept="audio/*" id="songUpload">
  </div>

  <!-- PREVIEW -->
  <div id="preview" class="editor-section hidden">
    <button onclick="forceReveal()">Preview After Countdown</button>
    <div class="preview-mobile" id="previewBox"></div>
  </div>

  <button onclick="closeEditor()">Exit Editor</button>
</div>

</div>

<script>
const TARGET = new Date("Jan 1, 2026 00:00:00").getTime();
const PASSWORD = "love2026";

function updateCountdown() {
  const now = Date.now();
  const diff = TARGET - now;
  if (diff <= 0) {
    document.getElementById("countdown").classList.add("hidden");
    document.getElementById("reveal").classList.remove("hidden");
    return;
  }
  const d = Math.floor(diff/86400000);
  const h = Math.floor(diff/3600000)%24;
  const m = Math.floor(diff/60000)%60;
  const s = Math.floor(diff/1000)%60;
  countdown.innerText = `${d}d ${h}h ${m}m ${s}s`;
}
setInterval(updateCountdown,1000);
updateCountdown();

/* Editor */
function openEditor() {
  const pass = prompt("Password?");
  if (pass === PASSWORD) {
    public.classList.add("hidden");
    editor.classList.remove("hidden");
    loadData();
  }
}

function closeEditor() {
  editor.classList.add("hidden");
  public.classList.remove("hidden");
}

function showTab(name) {
  document.querySelectorAll(".editor-section").forEach(e=>e.classList.add("hidden"));
  document.getElementById(name).classList.remove("hidden");
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  event.target.classList.add("active");
}

/* Save Content */
["editTitle","editGreeting","editMessage"].forEach(id=>{
  document.getElementById(id).oninput = ()=>{
    localStorage.setItem(id, document.getElementById(id).value);
    title.innerText = localStorage.getItem("editTitle");
    greeting.innerText = localStorage.getItem("editGreeting");
    message.innerText = localStorage.getItem("editMessage");
  }
});

/* Theme */
accentPicker.oninput = ()=>{
  document.documentElement.style.setProperty("--accent", accentPicker.value);
};

/* Music */
songUpload.onchange = ()=>{
  const file = songUpload.files[0];
  const reader = new FileReader();
  reader.onload = ()=> music.src = reader.result;
  reader.readAsDataURL(file);
};

/* Preview */
function forceReveal() {
  previewBox.innerHTML = document.getElementById("reveal").outerHTML;
}

function loadData() {
  editTitle.value = localStorage.getItem("editTitle") || title.innerText;
  editGreeting.value = localStorage.getItem("editGreeting") || greeting.innerText;
  editMessage.value = localStorage.getItem("editMessage") || message.innerText;
}
</script>

</body>
</html>
