<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate New Year Countdown Notebook</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Baloo 2', cursive;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    background: #fff9c4; /* pastel yellow background */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    color: #333; /* darker text for readability */
    position: relative;
  }

  /* Buttons, timer, notebook, editor always above canvases */
  #edit-btn,
  #notebook,
  #editor-ui,
  #timer {
    position: relative;
    z-index: 10;
  }

  /* Fixed edit button */
  #edit-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 10px 15px;
    background-color: #f7c873; /* golden accent */
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    z-index: 15;
  }

  #timer {
    font-size: 4rem;
    margin: 30px 0;
    color: #f7c873;
    text-shadow: 0 0 15px #f7c873, 0 0 30px #fff;
    transition: transform 0.5s ease;
  }

  #notebook {
    display: none;
    width: 90%;
    max-width: 700px;
    background: #fffde7; /* soft cream for notebook */
    border: 3px solid #f7c873;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 0 20px rgba(247,200,115,0.7);
    margin-bottom: 20px;
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 1s ease, transform 1s ease;
    color: #333;
  }

  #notebook.show {
    display: block;
    opacity: 1;
    transform: scale(1);
  }

  #notebook h2 {
    text-align: center;
    color: #f7c873;
    margin-top: 0;
  }

  #messages p {
    border-bottom: 1px dashed #f7c873;
    padding: 5px 0;
    margin: 5px 0;
    color: #333;
  }

  #messages p {
  text-align: justify;
  text-justify: inter-word;
  line-height: 1.8;
}

  #pdf-upload, #pdf-link, #editor-ui button {
    margin-top: 10px;
    margin-bottom: 10px;
    padding: 10px 15px;
    background-color: #f7c873;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
  }

  #pdf-link {
    display: block;
    margin-top: 10px;
    color: #f7a600;
    text-decoration: none;
    font-weight: bold;
  }

  #editor-ui {
    display: none;
    width: 90%;
    max-width: 700px;
    background: #fffde7; /* match notebook theme */
    border: 2px dashed #f7c873;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 3px 3px 15px rgba(0,0,0,0.3);
    margin-bottom: 20px;
    opacity: 0;
    transition: opacity 0.5s ease;
    color: #333;
  }

  #editor-ui.show {
    display: block;
    opacity: 1;
  }

  #editor-ui textarea {
    width: 100%;
    height: 200px;
    border-radius: 10px;
    border: 1px solid #f7c873;
    padding: 10px;
    font-family: 'Baloo 2', cursive;
    font-size: 1rem;
    resize: vertical;
    color: #333;
    background: #fffde7;
  }

  canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
  }
</style>
</head>
<body>

<!-- Edit Button -->
<button id="edit-btn">Edit</button>

<!-- Timer -->
<div id="timer">00:00:00</div>

<!-- Notebook -->
<div id="notebook">
  <h2>Happy New Year!</h2>
  <div id="messages"></div>
  <input type="file" id="pdf-upload" accept="application/pdf">
  <a id="pdf-link" href="#" target="_blank"></a>
</div>

<!-- Editor UI -->
<div id="editor-ui">
  <h3>Edit Notebook Messages</h3>
  <textarea id="editor-text"></textarea>
  <button id="save-editor">Save Messages</button>
  <button id="full-preview-editor">Full Preview Mode</button>
</div>

<!-- Canvases -->
<canvas id="background-canvas"></canvas>
<canvas id="fireworks-canvas"></canvas>
<canvas id="confetti-canvas"></canvas>

<!-- Sound Effects -->
<audio id="firework-sound" src="https://freesound.org/data/previews/276/276027_5121236-lq.mp3"></audio>
<audio id="cheer-sound" src="https://freesound.org/data/previews/320/320655_4939433-lq.mp3"></audio>

<script>
  // ---------- Background Stars ----------
  const bgCanvas = document.getElementById('background-canvas');
  const bgCtx = bgCanvas.getContext('2d');
  bgCanvas.width = window.innerWidth;
  bgCanvas.height = window.innerHeight;

  class Star {
    constructor() {
      this.reset();
    }
    reset() {
      this.x = Math.random()*bgCanvas.width;
      this.y = Math.random()*bgCanvas.height;
      this.size = Math.random()*2+1;
      this.speedY = Math.random()*0.3+0.1;
      this.twinkle = Math.random()*0.5+0.5;
    }
    update() {
      this.y += this.speedY;
      if(this.y>bgCanvas.height) this.y=0;
    }
    draw() {
      bgCtx.fillStyle = `rgba(255, 255, 255, ${this.twinkle})`;
      bgCtx.beginPath();
      bgCtx.moveTo(this.x,this.y-this.size);
      for(let i=0;i<5;i++){
        bgCtx.lineTo(
          this.x + this.size*Math.cos((18+i*72)*Math.PI/180),
          this.y - this.size*Math.sin((18+i*72)*Math.PI/180)
        );
        bgCtx.lineTo(
          this.x + this.size/2*Math.cos((54+i*72)*Math.PI/180),
          this.y - this.size/2*Math.sin((54+i*72)*Math.PI/180)
        );
      }
      bgCtx.fill();
    }
  }

  const stars = [];
  for(let i=0;i<150;i++) stars.push(new Star());

  function animateStars() {
    bgCtx.fillStyle = 'rgba(255,249,196,0.3)';
    bgCtx.fillRect(0,0,bgCanvas.width,bgCanvas.height);
    stars.forEach(s=>{s.update(); s.draw();});
    requestAnimationFrame(animateStars);
  }
  animateStars();
  window.addEventListener('resize', ()=>{bgCanvas.width=window.innerWidth; bgCanvas.height=window.innerHeight;});

  // ---------- Countdown ----------
  const countDownDate = new Date("Jan 1, 2026 00:00:00").getTime();
  const timerElement = document.getElementById('timer');
  const notebook = document.getElementById('notebook');
  const messagesDiv = document.getElementById('messages');

let messages = [
  "To my dear best friend, supporter, foodie, freaky and horny ass lover – Francis Emmanuel Dalusong,",

  "Meeting, getting to know you, and even being lucky enough that I could get to be your lover is the biggest highlight of my entire 2025 year. I still remember the kilig I felt when you moved your chair beside me just to not make me lonely. I didn't expect that the “kuya” Francis who I admired and look up to would become so close and dear to my life, even becoming as much as my “mahal”. To my kahel na langit – who I could go to when my life feels hard and heavy, to my Dilaw – ever so radiant, warm, and gentle that even when clouds cover your presence, I still feel the warmth you exude, and mostly my tangerine – the one who stayed, the one I breathe, and the one who cures my tiredness and sickness, I love you and appreciate you so much.",

  "The strings you've been pulling in my heart have been making melodious symphonies that even I can't help but be immersed in. I didn't expect that kolorcoaster would be beside me, bringing color to my entire life. If one person were to have every color, it would be you, mahal – smiling and flashing the brightest white light that helps me ground myself and light up my dark days. You gave me more intense feelings than any love song could ever compare to.",

  "I don't have any complaints this year, but my only regret is that I have hurt you with my careless and immature antics. I may not be the richest, brightest, smartest, and most privileged person in the world, but thank you for accepting and loving me as I am, mahal ko.",

  "Thank you for all of the unforgettable memories, first experiences, and love you gave me in 2025. I hope your 2026 will be full of happiness, laughter, wealth, and in-heat moments (you absolute horndog). I love you so much, and happy new year, mahal ko ^^",

  "Continue being your genuine and ever so effervescent self ^^",

  "Cheers to 2026. To many more dates and moments with you, mahal <3"
];

  function updateTimer() {
    const now = new Date().getTime();
    const distance = countDownDate-now;
    if(distance>0){
      const hours = Math.floor((distance%(1000*60*60*24))/(1000*60*60));
      const minutes = Math.floor((distance%(1000*60*60))/(1000*60));
      const seconds = Math.floor((distance%(1000*60))/1000);
      timerElement.textContent = `${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
    } else {
      clearInterval(timerInterval);
      timerElement.style.display='none';
      showNotebook();
      playCelebrationSounds();
      launchFireworks();
      launchConfetti();
    }
  }
  const timerInterval=setInterval(updateTimer,1000);

  function showNotebook(){ notebook.classList.add('show'); renderMessages(); }
  function renderMessages(){ messagesDiv.innerHTML=''; messages.forEach(msg=>{const p=document.createElement('p');p.textContent=msg; messagesDiv.appendChild(p);}); }

  // ---------- PDF Upload ----------
  const pdfUpload=document.getElementById('pdf-upload');
  const pdfLink=document.getElementById('pdf-link');
  pdfUpload.addEventListener('change', (e)=>{
    const file=e.target.files[0];
    if(file && file.type==="application/pdf"){
      const url=URL.createObjectURL(file);
      pdfLink.href=url;
      pdfLink.textContent=`Open PDF: ${file.name}`;
    } else { pdfLink.href="#"; pdfLink.textContent=""; alert("Please upload a valid PDF."); }
  });

  // ---------- Edit Button ----------
  const editBtn = document.getElementById('edit-btn');
  const editorUI = document.getElementById('editor-ui');
  const editorText = document.getElementById('editor-text');
  const saveEditorBtn = document.getElementById('save-editor');
  const fullPreviewEditorBtn = document.getElementById('full-preview-editor');

  editBtn.addEventListener('click', ()=>{
    const password = prompt("Enter password to edit:");
    if(password==="newyear123"){
      editorUI.classList.add('show');
      editorText.value = messages.join('\n');
    } else if(password!==null){
      alert("Incorrect password!");
    }
  });

  saveEditorBtn.addEventListener('click', ()=>{
    const edited = editorText.value.split('\n').filter(l=>l.trim()!=='');
    if(edited.length>0){messages=edited; renderMessages(); alert("Messages saved!");}
  });

  fullPreviewEditorBtn.addEventListener('click', ()=>{
    timerElement.style.display='none';
    notebook.classList.add('show');
    renderMessages();
  });

  // ---------- Fireworks ----------
  const fwCanvas=document.getElementById('fireworks-canvas');
  const fwCtx=fwCanvas.getContext('2d');
  fwCanvas.width=window.innerWidth;
  fwCanvas.height=window.innerHeight;

  class Firework{constructor(x,y){this.x=x; this.y=y; this.particles=[]; for(let i=0;i<50;i++){this.particles.push({x:x,y:y,vx:(Math.random()-0.5)*5,vy:(Math.random()-0.5)*5,alpha:1,color:`hsl(${Math.random()*360},100%,50%)`})}}update(){this.particles.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.alpha-=0.02}); this.particles=this.particles.filter(p=>p.alpha>0);}draw(){this.particles.forEach(p=>{fwCtx.fillStyle=p.color; fwCtx.globalAlpha=p.alpha; fwCtx.beginPath(); fwCtx.arc(p.x,p.y,3,0,Math.PI*2); fwCtx.fill();}); fwCtx.globalAlpha=1;}}
  let fireworks=[];
  function launchFireworks(){const interval=setInterval(()=>{fireworks.push(new Firework(Math.random()*fwCanvas.width, Math.random()*fwCanvas.height/2));},300); setTimeout(()=>clearInterval(interval),5000); function animate(){fwCtx.fillStyle='rgba(0,0,0,0.2)'; fwCtx.fillRect(0,0,fwCanvas.width,fwCanvas.height); fireworks.forEach(f=>{f.update(); f.draw();}); fireworks=fireworks.filter(f=>f.particles.length>0); if(fireworks.length>0) requestAnimationFrame(animate);} animate();}

  // ---------- Confetti ----------
  const confCanvas=document.getElementById('confetti-canvas');
  const confCtx=confCanvas.getContext('2d');
  confCanvas.width=window.innerWidth; confCanvas.height=window.innerHeight;
  class Confetti{constructor(){this.x=Math.random()*confCanvas.width; this.y=Math.random()*confCanvas.height-500; this.r=Math.random()*6+4; this.d=Math.random()*1+0.5; this.color=`hsl(${Math.random()*60+40},100%,50%)`;} update(){this.y+=this.d; if(this.y>confCanvas.height) this.y=-10;} draw(){confCtx.beginPath(); confCtx.fillStyle=this.color; confCtx.arc(this.x,this.y,this.r,0,Math.PI*2); confCtx.fill();}}
  const confetti=[]; for(let i=0;i<200;i++) confetti.push(new Confetti());
  function launchConfetti(){function animate(){confCtx.clearRect(0,0,confCanvas.width,confCanvas.height); confetti.forEach(c=>{c.update();c.draw();}); requestAnimationFrame(animate);} animate();}

  // ---------- Sounds ----------
  const fireworkSound = document.getElementById('firework-sound');
  const cheerSound = document.getElementById('cheer-sound');
  function playCelebrationSounds(){
    fireworkSound.currentTime=0;
    cheerSound.currentTime=0;
    fireworkSound.play();
    setTimeout(()=>cheerSound.play(),1000);
  }

  window.addEventListener('resize', ()=>{
    bgCanvas.width=window.innerWidth; bgCanvas.height=window.innerHeight;
    fwCanvas.width=window.innerWidth; fwCanvas.height=window.innerHeight;
    confCanvas.width=window.innerWidth; confCanvas.height=window.innerHeight;
  });
</script>
</body>
</html>

